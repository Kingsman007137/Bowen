# 卡片式笔记软件 MVP 开发计划书

## 产品构想

这是一款基于 **Next.js** 开发的卡片式笔记软件，采用毛玻璃质感与柔和渐变色的卡片设计，用户可在无限画布上自由创建、拖拽、编辑和连接卡片。每个卡片支持文字笔记、图片、引用等内容输入，并可切换不同色系主题，用以表达层次与情绪。产品核心功能聚焦于「自由记录」与「视觉化组织」，旨在让用户以直观、无压的方式整理想法与构建知识结构。
主要想用作读书笔记。


## 一、技术栈选型

| 模块        | 技术                            | 选型理由                             |
| --------- | ----------------------------- | -------------------------------- |
| 前端框架      | **Next.js 15 + App Router**   | 支持高性能渲染、文件路由清晰，兼容未来 SSR / 桌面端适配  |
| UI 框架     | **TailwindCSS**               | 快速搭建 UI，便于统一视觉风格                 |
| 画布系统      | **React Flow**                | 具备节点 + 连线能力，成熟社区，适合未来扩展          |
| 富文本编辑     | **Tiptap**                    | ProseMirror 底层，支持图片、Markdown、快捷键 |
| 数据持久化     | **localforage（IndexedDB 封装）** | 浏览器本地存储，提升初版开发效率                 |
| 状态管理      | **Zustand（必要时）或 useState**    | MVP 阶段状态简单，避免过早引入复杂框架            |

---

## 二、MVP 开发流程

| 阶段        | 目标                     | 输出                                               |
| --------- | ---------------------- | ------------------------------------------------ |
| 1. 项目初始化  | 建立基础框架与依赖              | Next.js + TailwindCSS + React Flow + Tiptap 项目骨架 |
| 2. 界面优化   | 导航栏、主题切换、画布视觉优化       | 清晰的界面层次、亮暗模式切换                                   |
| 3. 画布实现   | 无限拖拽 + 缩放              | 可移动的空白画布                                         |
| 4. 卡片节点   | 自定义节点组件                | 毛玻璃 + 渐变配色 + 拖拽移动                                |
| 5. 内容编辑   | 富文本编辑模块                | 支持文字、换行、插入图片                                     |
| 6. 连线功能   | 节点间手动连接                | 曲线连线，可删除                                         |
| 7. 数据存储   | 自动保存至本地                | 刷新后保持画布状态                                        |
| 8. 操作体验优化 | 快捷操作 / 删除逻辑            | 新建按钮 或 双击创建卡片                                    |
| 9. 演示版本封装 | 打包为静态 Demo 或托管到 Vercel | 可对外展示的体验入口                                       |

---

## 三、MVP 验证方式

| 验证类型   | 验证内容                            | 验证标准                 |
| ------ | ------------------------------- | -------------------- |
| 操作效率   | 创建卡片是否顺畅                        | 3秒内完成“新增 → 编辑 → 移动”  |
| 可用性    | 是否能完成“记录两张卡 → 连线 → 关闭 → 重新打开恢复” | 正确恢复即通过              |

---

## 四、下一步迭代模块规划（标准版功能）

| 模块        | 功能方向                                       | 是否必须进 V1 正式版 |
| --------- | ------------------------------------------ | ------------ |
| 用户系统      | 登录 / 注册 / 多设备同步                            | ✅            |
| 云备份 / 同步  | IndexedDB → 云端存储（Supabase / SQLite + 同步协议） | ✅            |
| 卡片标签 / 属性 | 类型标记（想法 / 摘抄 / 问题）                         | ✅            |
| 搜索 & 筛选   | 全局全文检索 / 标签筛选                              | ✅            |
| 快捷方式      | 键盘操作（如 Cmd+Enter 新建卡）                      | ✅            |
| 卡片分组 / 折叠 | 大型画布结构化                                    | 可选           |
| 导出能力      | Markdown / PDF / 图片导出                      | 可选           |
| AI 扩展     | 自动摘要 / 自动关联推荐                              | 增强而非核心       |

---

## 项目文件结构规划（仅供参考）
```
Bowen/
├─ src/                        # 源代码目录
│  ├─ app/
│  │  ├─ layout.tsx           # 全局布局，包含导航栏、主题注入、字体
│  │  ├─ page.tsx             # 主画布页面（React Flow 实现）
│  │  └─ globals.css          # Tailwind 基础样式 + 全局变量（blur/渐变等）
│  │
│  ├─ components/
│  │  ├─ Canvas/
│  │  │  ├─ CanvasContainer.tsx   # 画布主容器，管理节点、连线
│  │  │  └─ CardNode.tsx          # 自定义卡片节点（毛玻璃渐变样式）
│  │  │
│  │  ├─ Editor/
│  │  │  ├─ TiptapEditor.tsx      # 卡片内富文本编辑器
│  │  │  └─ ImageUploader.tsx     # 图片上传模块（base64 方案）
│  │  │
│  │  └─ UI/
│  │     ├─ ColorPicker.tsx       # 渐变色切换组件
│  │     └─ Toolbar.tsx           # 顶部操作栏（新建卡片 / 保存提示等）
│  │
│  ├─ hooks/
│  │  ├─ useLocalStorage.ts   # LocalForage 封装，用于数据持久化
│  │  └─ useCanvasStore.ts    # Zustand 状态管理（卡片节点/连线）
│  │
│  ├─ lib/
│  │  ├─ constants.ts         # 渐变色系配置、全局参数
│  │  └─ storage.ts           # IndexedDB 读写逻辑封装
│  │
│  └─ styles/
│     └─ theme.css            # 统一毛玻璃效果、阴影、过渡动画定义
│
├─ public/
│  └─ assets/                 # 默认背景图、Logo、渐变预览图
│
├─ package.json
└─ tailwind.config.js
```

**关键结构说明**
- `/src/app/page.tsx` 是整个产品的"画布入口"，负责加载 React Flow。
- `/src/components/Canvas/CardNode.tsx` 是最重要的文件之一，定义单个卡片的外观与交互。
- `/src/lib/constants.ts` 用于存放所有渐变色组定义与通用数值（透明度、模糊强度等），方便全局统一管理。
- `/src/hooks/useCanvasStore.ts` 管理卡片与连线状态，简化 React Flow 与组件通信。