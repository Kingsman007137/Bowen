# 任务：项目初始化

## 任务信息

- **任务名称**: 项目初始化 (Project Initialization)
- **创建时间**: 2025-10-21
- **优先级**: 高
- **状态**: 未开始

## 任务描述

建立卡片式笔记软件的基础开发框架，完成技术栈的配置与集成。这是 MVP 开发的第一阶段，需要搭建完整的开发环境，确保所有核心依赖正确安装并能协同工作。

**具体工作内容：**

1. 初始化 Next.js 15 项目（使用 App Router）
2. 配置 TailwindCSS，建立基础样式系统
3. 集成 React Flow 画布库
4. 集成 Tiptap 富文本编辑器
5. 配置 localforage（IndexedDB 封装）用于数据持久化
6. 搭建项目文件结构（按照 MVP 计划书规划）
7. 配置开发环境（ESLint、TypeScript、环境变量等）
8. 验证所有依赖正常工作

**任务边界：**
- 仅完成框架搭建和依赖配置，不涉及具体业务功能开发
- 建立基础的项目结构，但各组件可以是空壳
- 确保项目能够成功启动并运行

**特殊要求：**
- 使用 TypeScript 作为开发语言
- 确保所有依赖版本兼容
- 遵循 Next.js 15 App Router 最佳实践
- 建立清晰的目录结构，便于后续开发

## TODO-LIST

1. [ ] 创建 Next.js 15 项目（App Router 模式）
   - 使用 `npx create-next-app@latest` 初始化
   - 选择 TypeScript、ESLint、App Router 等配置

2. [ ] 安装并配置 TailwindCSS
   - 安装 tailwindcss、postcss、autoprefixer
   - 配置 `tailwind.config.js`
   - 在 `app/globals.css` 中引入 Tailwind 指令

3. [ ] 安装核心依赖库
   - React Flow: `npm install @xyflow/react`
   - Tiptap: `npm install @tiptap/react @tiptap/starter-kit @tiptap/extension-image`
   - localforage: `npm install localforage`
   - Zustand (可选): `npm install zustand`

4. [ ] 建立项目文件结构
   - 创建 `src/` 目录
   - 创建 `src/components/Canvas/` 目录及占位文件
   - 创建 `src/components/Editor/` 目录及占位文件
   - 创建 `src/components/UI/` 目录及占位文件
   - 创建 `src/hooks/` 目录
   - 创建 `src/lib/` 目录及 `constants.ts`、`storage.ts`
   - 创建 `src/styles/theme.css` 文件

5. [ ] 配置基础样式系统
   - 在 `src/lib/constants.ts` 中定义渐变色系配置
   - 在 `src/styles/theme.css` 中定义毛玻璃效果、阴影等基础样式
   - 配置 TailwindCSS 主题扩展（模糊效果、自定义颜色等）

6. [ ] 创建基础组件骨架
   - `src/app/layout.tsx` - 全局布局
   - `src/app/page.tsx` - 主画布页面（空壳）
   - `src/components/Canvas/CanvasContainer.tsx` - 画布容器（空壳）
   - `src/components/Canvas/CardNode.tsx` - 卡片节点（空壳）

7. [ ] 验证项目运行
   - 执行 `npm run dev` 确保项目启动成功
   - 访问 localhost:3000 验证页面正常显示
   - 检查控制台无严重错误

8. [ ] 配置开发工具
   - 配置 TypeScript `tsconfig.json`（如需调整）
   - 配置 ESLint 规则（如需自定义）
   - 添加 `.gitignore` 确保排除 node_modules、.next 等

9. [ ] 创建 README.md
   - 说明项目技术栈
   - 列出安装和启动步骤
   - 说明项目结构

10. [ ] 提交初始化代码
    - Git 初始化（如未完成）
    - 提交首次代码：`git commit -m "feat: 项目初始化完成"`

## 验收标准

- ✅ 项目可以成功启动（`npm run dev` 无错误）
- ✅ 浏览器访问 localhost:3000 能正常显示页面
- ✅ 所有核心依赖已安装且版本兼容
- ✅ 项目文件结构符合 MVP 计划书规划
- ✅ TypeScript 编译无错误
- ✅ ESLint 检查通过（无严重错误）
- ✅ 基础样式系统配置完成（TailwindCSS 可用）
- ✅ README.md 文档完整，说明清晰

## 备注

**技术选型确认：**
- Next.js 版本：15.x（使用 App Router）
- React 版本：18.x 或更高
- Node.js 版本：建议 18.x 或更高

**开发建议：**
1. 优先使用官方文档推荐的配置方式
2. 保持依赖版本最新稳定版，避免潜在兼容性问题
3. 建立清晰的文件命名规范（统一使用 PascalCase 或 camelCase）
4. 考虑添加 Prettier 进行代码格式化

**风险提示：**
1. React Flow 和 Tiptap 可能有版本兼容性问题，需要测试验证
2. Next.js 15 是较新版本，部分库可能尚未完全适配，遇到问题需查阅官方文档
3. localforage 在某些浏览器可能有兼容性限制，需要做好降级方案准备

**后续任务衔接：**
完成此任务后，进入第二阶段「画布实现」，将在 `src/components/Canvas/CanvasContainer.tsx` 中实现基于 React Flow 的无限画布功能。

